import{u as F,a as $,b as d,j as e,U as M,C as n,c,d as u,D as g,e as i,f as x,M as m,B as h,g as f,h as b,i as y,T as D}from"./index-CFejLDhn.js";function R(){const{user:o}=F();$();const{data:t}=d({queryKey:["/api/students/profile"]}),{data:v=[]}=d({queryKey:["/api/fees/student"]}),{data:r=[]}=d({queryKey:["/api/attendance/student"]}),{data:w=[]}=d({queryKey:["/api/results/student"]}),{data:S=[]}=d({queryKey:["/api/notices/student"]}),j=v.filter(s=>s.status==="pending"),p=j.reduce((s,A)=>s+parseFloat(A.amount.toString()),0),a=r.length>0?r.filter(s=>s.status==="present").length/r.length*100:0,l=w[0],N=S.filter(s=>s.priority==="high").slice(0,3);return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-primary text-white p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(M,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold",children:(t==null?void 0:t.name)||(o==null?void 0:o.username)}),e.jsx("p",{className:"text-sm opacity-90",children:t!=null&&t.rollNumber?`Roll: ${t.rollNumber}`:"Student Portal"})]})]})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(n,{children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Attendance"}),e.jsxs("p",{className:"text-xl font-bold",children:[a.toFixed(1),"%"]})]})]})})}),e.jsx(n,{children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending Fees"}),e.jsxs("p",{className:"text-xl font-bold",children:["$",p]})]})]})})})]}),e.jsxs(n,{children:[e.jsx(i,{className:"pb-3",children:e.jsxs(x,{className:"text-base flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx(u,{className:"w-4 h-4"}),e.jsx("span",{children:"Attendance"})]}),e.jsx(m,{title:"Attendance Report",text:`My attendance rate: ${a.toFixed(1)}%`,className:"text-sm",children:e.jsx(h,{variant:"ghost",size:"sm",children:"Share"})})]})}),e.jsxs(c,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"This Month"}),e.jsxs(f,{variant:a>=75?"default":"destructive",children:[a.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${Math.min(a,100)}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Present: ",r.filter(s=>s.status==="present").length]}),e.jsxs("span",{children:["Total: ",r.length]})]})]})]}),j.length>0&&e.jsxs(n,{children:[e.jsx(i,{className:"pb-3",children:e.jsxs(x,{className:"text-base flex items-center space-x-2",children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx("span",{children:"Pending Fees"})]})}),e.jsx(c,{className:"space-y-3",children:j.slice(0,3).map(s=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-orange-50 dark:bg-orange-950 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:s.feeType}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Due: ",s.dueDate?new Date(s.dueDate).toLocaleDateString():"ASAP"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-orange-600",children:["$",s.amount]}),e.jsx(m,{title:"Fee Payment Required",text:`${s.feeType}: $${s.amount} due ${s.dueDate?new Date(s.dueDate).toLocaleDateString():"ASAP"}`,children:e.jsx(h,{variant:"ghost",size:"sm",className:"text-xs h-6",children:"Share"})})]})]},s.id))})]}),l&&e.jsxs(n,{children:[e.jsx(i,{className:"pb-3",children:e.jsxs(x,{className:"text-base flex items-center space-x-2",children:[e.jsx(b,{className:"w-4 h-4"}),e.jsx("span",{children:"Latest Result"})]})}),e.jsx(c,{children:e.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:l.examType}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.subject})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[l.marksObtained,"/",l.totalMarks]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(l.marksObtained/l.totalMarks*100).toFixed(1),"%"]})]})]})})]}),N.length>0&&e.jsxs(n,{children:[e.jsx(i,{className:"pb-3",children:e.jsxs(x,{className:"text-base flex items-center space-x-2",children:[e.jsx(y,{className:"w-4 h-4"}),e.jsx("span",{children:"Important Notices"})]})}),e.jsx(c,{className:"space-y-3",children:N.map(s=>e.jsx("div",{className:"p-3 border-l-4 border-red-500 bg-red-50 dark:bg-red-950",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:s.content})]}),e.jsx(f,{variant:"destructive",className:"ml-2 text-xs",children:s.priority})]})},s.id))})]}),e.jsxs(n,{children:[e.jsx(i,{className:"pb-3",children:e.jsx(x,{className:"text-base",children:"Quick Actions"})}),e.jsx(c,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(m,{title:"My Attendance Report",text:`My attendance rate: ${a.toFixed(1)}%`,className:"h-auto p-3 flex flex-col space-y-1 border rounded-lg cursor-pointer hover:bg-muted/50",children:[e.jsx(u,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:"Share Attendance"})]}),e.jsxs(m,{title:"Student Performance Summary",text:`Attendance: ${a.toFixed(1)}%, Pending Fees: $${p}`,className:"h-auto p-3 flex flex-col space-y-1 border rounded-lg cursor-pointer hover:bg-muted/50",children:[e.jsx(D,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:"Share Report"})]}),e.jsxs(h,{variant:"outline",className:"h-auto p-3 flex flex-col space-y-1",children:[e.jsx(y,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:"View Notices"})]}),e.jsxs(h,{variant:"outline",className:"h-auto p-3 flex flex-col space-y-1",children:[e.jsx(b,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:"My Results"})]})]})})]})]})]})}export{R as default};
